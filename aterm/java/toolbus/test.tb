
%%tool testing is { command="./java-adapter -class toolbus.TestTool" }
tool testing is { command="./java-adapter -TB_VERBOSE -class toolbus.Testing" }

process TEST is
let
  T : testing,
  X : term,
  Y : int,
  Z : list
in
  (
   Z := [1,2.3] .
   execute(testing, T?) .
   snd-do(T, testit("abc")) .
   snd-do(T, testit("a", 3)) .
   snd-do(T, testit("a", f([3]))) .
   snd-eval(T, question(square)) .
   rec-value(T, answer(X?)) .
   printf("X = %t\n", X) .
   snd-do(T, listtest(Z)) .
   snd-terminate(T, "bye bye!") .
   printf("tool disconnected")
  ) . shutdown("test done\n")
  ||
  (
    (
     rec-event(T, test-event(Y?)) .
     printf("acknowledging event: test-event(%t)\n", Y) .
     snd-ack-event(T, test-event(Y, 4.5))
    ) * delta
  )
endlet

toolbus(TEST)
